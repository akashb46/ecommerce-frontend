document.addEventListener("DOMContentLoaded",async()=>{const t=document.getElementById("product-grid"),e=document.getElementById("cart-count");if(t)try{const e=await fetch("https://fakestoreapi.com/products"),a=await e.json();t.innerHTML="",a.forEach(e=>{const a=document.createElement("div");a.classList.add("product-card"),a.innerHTML=`\n        <a href="product.html?id=${e.id}" class="product-link">\n          <img \n            src="${e.image}" \n            alt="${e.title}" \n            loading="lazy" \n            width="200"\n          />\n          <h3>${e.title.slice(0,25)}...</h3>\n          <p class="price">₹${(83*e.price).toFixed(0)}</p>\n        </a>\n        <button class="btn add-to-cart">Add to Cart</button>\n      `,a.querySelector(".add-to-cart").addEventListener("click",t=>{t.preventDefault(),function(t){let e=JSON.parse(localStorage.getItem("cart"))||[];const a=e.find(e=>e.id===t.id);a?a.quantity+=1:e.push({...t,quantity:1});localStorage.setItem("cart",JSON.stringify(e)),n(),alert("✅ Product added to cart!")}(e)}),t.appendChild(a)}),n()}catch(e){console.error("⚠️ Error loading products:",e),t.innerHTML="<p>⚠️ Failed to load products. Please try again later.</p>"}else console.error("❌ Product grid not found!");function n(){const t=(JSON.parse(localStorage.getItem("cart"))||[]).reduce((t,e)=>t+e.quantity,0);e&&(e.textContent=t)}});